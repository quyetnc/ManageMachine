<div class="mobile-app-container">
    <div class="app-header">
        <button mat-icon-button (click)="goBack()">
            <mat-icon>arrow_back</mat-icon>
        </button>
        <span class="header-title">My Requests</span>
        <div style="width: 40px;"></div>
    </div>

    <div class="content-scroll-area">
        <div *ngIf="loading" class="loading-container">
            <mat-spinner diameter="32"></mat-spinner>
            <p>Loading requests...</p>
        </div>

        <div class="empty-state" *ngIf="!loading && requests.length === 0">
            <mat-icon>inbox</mat-icon>
            <p>No transfer requests found.</p>
        </div>

        <div class="request-list" *ngIf="!loading && requests.length > 0">
            <div class="request-card" *ngFor="let req of requests">
                <div class="card-header">
                    <span class="machine-name">{{ req.machineName }}</span>
                    <span class="status-badge" [ngClass]="getStatusClass(req.status)">
                        {{ getStatusLabel(req.status) }}
                    </span>
                </div>
                <div class="card-body">
                    <div class="info-row">
                        <span class="label">Type:</span>
                        <span class="value">{{ getTypeLabel(req.requestType) }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">To:</span>
                        <span class="value">{{ req.toUserName }}</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Date:</span>
                        <span class="value">{{ req.createdAt | date:'shortDate' }}</span>
                    </div>
                    <div class="reason-row" *ngIf="req.reason">
                        <p class="reason-text">"{{ req.reason }}"</p>
                    </div>
                </div>
                <div class="card-actions" *ngIf="req.status === RequestStatus.Pending">
                    <button mat-stroked-button color="warn" (click)="cancelRequest(req)">
                        Cancel Request
                    </button>
                </div>
            </div>
        </div>

        <div class="bottom-spacer"></div>
    </div>
</div>